(this["webpackJsonpspothole.authority"]=this["webpackJsonpspothole.authority"]||[]).push([[0],{583:function(e,t,a){e.exports=a(911)},588:function(e,t,a){},804:function(e,t,a){},911:function(e,t,a){"use strict";a.r(t);var n,r,o=a(0),i=a.n(o),l=a(16),c=a.n(l),s=(a(588),a(22)),u=a(23),m=a(25),p=a(26),d=a(63),h=a(944),g=a(934),f=a(116),E=a(951),y=a(32),b=a.n(y),v=a(198),S=a(468),x=a(151),k=a(343),C=a.n(k),w="53865530561-k1vrtof9nrliokat4rv1nkqf9pi57nlk.apps.googleusercontent.com",j="https://spothole.ml:5000",I=j+"/api/authority/reports/geonear",O=j+"/api/authority/send/email",R="http://nirbhay.me/spothole.authority",T=Object(v.a)(Object(v.c)({googleMapURL:"https://maps.googleapis.com/maps/api/js?key=AIzaSyDZBgT-uZYXzTSkTJbiDcYT4D_XYsS8aUQ&v=3.exp&libraries=geometry,drawing,places,visualization",loadingElement:i.a.createElement("div",{style:{height:"100%"}}),containerElement:i.a.createElement("div",{style:{height:"400px"}}),mapElement:i.a.createElement("div",{style:{height:"100%"}})}),Object(v.d)((function(){return{isOpen:!1,infoIndex:null,selectedReports:[],heatMapOn:!1}}),{onToggleOpen:function(e){var t=e.isOpen;e.infoIndex;return function(e){return{isOpen:!t,infoIndex:e}}},toggleHeatMap:function(e){e.heatMapOn;return function(e){return{heatMapOn:!e}}}}),x.withScriptjs,x.withGoogleMap,Object(v.b)({componentDidMount:function(){var e=this;b.a.post(I,{data:{authorityId:this.props.authorityId}}).then((function(t){var a=t.data.map((function(e){return{location:new google.maps.LatLng(e.latitude,e.longitude),weight:e.severity}}));e.setState({selectedReports:t.data,heatMapData:a})})).catch((function(e){console.info("Unable to create the region map")}))}}))((function(e){return i.a.createElement("div",null,i.a.createElement(S.a,{variant:"contained",color:"primary",onClick:function(){return e.toggleHeatMap(e.heatMapOn,e.heatMapData)},style:{float:"right",marginTop:"20px",marginBottom:"20px",position:"relative"}},"Toogle Heat Map Layer"),i.a.createElement(x.GoogleMap,{defaultZoom:14,defaultCenter:{lat:parseFloat(e.centerLat),lng:parseFloat(e.centerLng)}},e.selectedReports.map((function(t,a){var n;n=parseInt(t.severity)<=3?"https://i.ibb.co/2dzSbjJ/output-onlinepngtools-2.png":parseInt(t.severity)<=6?"https://i.ibb.co/RC2LmDh/output-onlinepngtools-1.png":"https://i.ibb.co/kMZV43H/output-onlinepngtools.png";var r=new window.google.maps.MarkerImage(n,null,null,null,new window.google.maps.Size(48,48));return i.a.createElement(x.Marker,{icon:r,key:a,position:{lat:parseFloat(t.latitude),lng:parseFloat(t.longitude)},onClick:function(){return e.onToggleOpen(a)}},e.isOpen&&e.infoIndex===a&&i.a.createElement(x.InfoWindow,{onCloseClick:e.onToggleOpen,key:a,visible:!0},i.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"3px",marginRight:"3px"}},i.a.createElement("div",{style:{color:"#212121",paddingRight:"10px",paddingBottom:"10px",fontWeight:"bold",lineHeight:1.5}},"Reported On: ",t.created_date.split(" ")[0],i.a.createElement("hr",{style:{marginTop:"3px",marginBottom:"3px"}}),"Current Status:"," ",t.status.charAt(0).toUpperCase()+t.status.slice(1),i.a.createElement("hr",{style:{marginTop:"3px",marginBottom:"3px"}}),"Reported Severity: ",t.severity,"/10 ",i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement(S.a,{color:"primary",variant:"contained",onClick:function(){return e.goToReport(t)}},"Go to Report")),i.a.createElement("div",null,i.a.createElement("img",{src:t.imageURL,width:"200px",style:{border:"2px solid black",borderRadius:"10px",marginRight:"10px",marginBottom:"10px"},alt:"Validated Pothole"})))))})),e.heatMapOn?i.a.createElement(C.a,{data:e.heatMapData,options:{radius:60,opacity:.8}}):i.a.createElement(C.a,{data:e.heatMapData,options:{radius:0,opacity:0}})))})),D=a(86),A=a(935),U=a(939),B=a(937),L=a(936),M=a(943),N=a(18),z=a(471),W=a(940),F=a(942),P=a(941),_=a(81),H=a(521),q=a.n(H),Y=a(144),V=a.n(Y),Z=a(5),G=a(950),J=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleChange=function(e,t){n.setState({value:t}),n.props.updateSeverityValue(t)},n.state={value:n.props.value},n}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props.classes;return i.a.createElement("div",{className:e.root},i.a.createElement(G.a,{classes:{container:e.slider},value:this.state.value,min:1,max:10,step:1,valueLabelDisplay:"on",onChange:this.handleChange}))}}]),a}(i.a.Component),K=Object(Z.a)({root:{width:"100%"},slider:{padding:"22px 0px"}})(J),X=a(515),Q=a.n(X),$=function(e){return i.a.createElement(_.a,{gutterBottom:!0,style:{marginBottom:e.marginBottom,color:e.color}},i.a.createElement("b",null,e.text," \xa0",e.editIcon&&i.a.createElement(Q.a,{style:{marginTop:"-5px"},fontSize:"small"})))},ee=a(469),te=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).makeEmpty=function(){n.setState({content:""}),n.checkRequired(n.textFieldRef.current,"required")},n.checkRequired=function(e,t){var a=e.value.trim();""!==a?n.setState({errorRequired:!1,content:e.value}):n.setState({errorRequired:void 0===t,content:e.value}),n.props.updateDescription(a)},n.state={errorRequired:!1,content:""},n.textFieldRef=i.a.createRef(),e.passMakeEmpty(n.makeEmpty),n}return Object(u.a)(a,[{key:"render",value:function(){var e=this;return i.a.createElement("div",null,i.a.createElement(_.a,{style:{marginBottom:"10px",marginTop:"5px"},gutterBottom:!0},"Add Comment"),i.a.createElement(ee.a,{inputRef:this.textFieldRef,error:this.state.errorRequired,onChange:function(t){return e.checkRequired(t.target)},required:!0,fullWidth:!0,variant:"outlined",placeholder:"Comments on the report/update",multiline:!0,rows:4,rowsMax:50,label:"Additional Comments (Required)",value:this.state.content}))}}]),a}(i.a.Component),ae=a(551),ne=function(e){return i.a.createElement("div",{style:{color:"#333"}},i.a.createElement(ae.a,{avatar:e.profileURL,side:e.side,messages:e.messageArray}))},re=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(s.a)(this,a),(r=t.call(this,e)).setDescription=function(e){r.setState({commentText:e}),""===e?r.setState({buttonDisabled:!0}):r.setState({buttonDisabled:!1})},r.getAllComments=function(){b.a.post("https://spothole.ml:5000/api/reports/comments",{data:{caseId:r.state.caseId}}).then((function(e){n.manageCommentData(e.data)})).catch((function(e){console.info("Problem with getting your comments!")}))},r.formatDateTime=function(e){var t=new Date(e),a=t.toLocaleString("en",{month:"long"}),n=t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return t.getDate()+" "+a+", "+t.getFullYear()+" @ "+n+" \u2192 \n"},r.manageCommentData=function(e){if(e.length>0){var t=e[0].userType,a=[],o=[],l=1;e.map((function(c){return c.userType===t?(a.push(r.formatDateTime(c.commentDateTime)+c.commentText),t=c.userType):(o.push(i.a.createElement(ne,{messageArray:a,side:n.getChatMessageSide(t),profileURL:r.props.profileURL})),t=c.userType,(a=[]).push(r.formatDateTime(c.commentDateTime)+c.commentText)),l===e.length&&o.push(i.a.createElement(ne,{messageArray:a,profileURL:r.props.profileURL,side:n.getChatMessageSide(t)})),++l,c})),n.setState({commentComponentArray:o})}return!0},r.getChatMessageSide=function(e){return"U"===e?"left":"right"},r.handleSubmit=function(){b.a.post("https://spothole.ml:5000/api/submit/report/comment",{data:r.state}).then((function(e){n.setState({emptyDescriptionBox:!0}),n.state.makeBoxEmptyFunction(),r.getAllComments()})).catch((function(e){console.info("Problem with submitting your comment!")}))},r.makeEmpty=function(e){n.setState({makeBoxEmptyFunction:e})},r.state={commentText:"",caseId:e.caseNumber,userType:"A",buttonDisabled:!0,commentComponentArray:[],emptyDescriptionBox:!1,makeBoxEmptyFunction:""},n=Object(d.a)(r),r.getAllComments(),r}return Object(u.a)(a,[{key:"render",value:function(){var e=this;return i.a.createElement("div",null,i.a.createElement("br",null),this.state.commentComponentArray.map((function(e,t){return i.a.createElement("div",{key:t},e)})),i.a.createElement("br",null),i.a.createElement(te,{passMakeEmpty:this.makeEmpty,emptyBox:this.state.emptyDescriptionBox,updateDescription:n.setDescription}),i.a.createElement(S.a,{onClick:function(){return e.handleSubmit()},color:"primary",disabled:this.state.buttonDisabled,style:{fontSize:"15px",fontWeight:"bold"}},"Submit"))}}]),a}(i.a.Component),oe=(a(804),a(334)),ie=a(342),le=a(335),ce=["Submitted","Approved","Working","Completed","Cancelled"],se=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(e){var n;Object(s.a)(this,a),(n=t.call(this,e)).mapOptions=function(e){var t=ce.indexOf(e);return ce.slice().splice(t)},n.handleChange=function(e){var t=e.target.value;n.setState({value:t}),n.props.updateSelectedValue(t)},n.capitalize=function(e){for(var t=0,a=(e=e.split(" ")).length;t<a;t++)e[t]=e[t][0].toUpperCase()+e[t].substr(1);return e.join(" ")};var r=n.capitalize(e.value);return n.state={value:r,options:n.mapOptions(r)},n}return Object(u.a)(a,[{key:"render",value:function(){return i.a.createElement(oe.a,{variant:"outlined"},i.a.createElement(le.a,{htmlFor:"outlined-age-native-simple"},"Status"),i.a.createElement(ie.a,{fullWidth:!0,native:!0,onChange:this.handleChange,label:"Report Status"},this.state.options.map((function(e,t){return i.a.createElement("option",{value:e},e)}))))}}]),a}(i.a.Component),ue=a(938),me=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleSubmit=function(){var e=n.props.updatedStatus.toLowerCase(),t=n.props.updatedSeverity,a=n.props.caseId;b.a.post("https://spothole.ml:5000/api/authority/update/report",{data:{caseId:a,status:e,severity:t}}).then((function(e){b.a.post("https://spothole.ml:5000/api/submit/report/comment",{data:{commentText:"Authority's Update - [Status: "+r.props.updatedStatus+", Severity: "+t+"] - "+r.state.commentText,caseId:a,userType:"A"}}).then((function(e){console.info("Report Updated");var t="Hi "+r.props.mailToProfileName+",\n\nThere is an update to your report. Please login to check the details. Thanks for being a part of the Spothole community.";b.a.post(O,{data:{emailId:r.props.mailToProfileEmail,subject:"New Notification from Spothole (Your Report Status)",message:t}}).then((function(e){console.info(e.data),window.location.reload()})).catch((function(e){window.location.reload()}))})).catch((function(e){console.info("Unable to Update Report")}))})).catch((function(e){console.info("Unable to Update Report")}))},n.setDescription=function(e){n.setState({commentText:e}),""===e?n.setState({buttonDisabled:!0}):n.setState({buttonDisabled:!1})},n.justClose=function(){n.props.updateCloseDialogState()},n.makeEmpty=function(e){r.setState({makeBoxEmptyFunction:e})},n.state={makeBoxEmptyFunction:"",commentText:"",buttonDisabled:!0},r=Object(d.a)(n),n}return Object(u.a)(a,[{key:"render",value:function(){var e=this;return i.a.createElement("div",null,i.a.createElement(A.a,{open:this.props.dialogOpenState,onClose:function(){return e.justClose()},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},i.a.createElement(L.a,{id:"alert-dialog-title"},this.props.title),i.a.createElement(B.a,null,i.a.createElement(_.a,{variant:"body2",color:"textSecondary",component:"p"},i.a.createElement($,{text:"Updated Severity \u2192 "+this.props.updatedSeverity,marginBottom:"12px",color:"primary"}),i.a.createElement($,{text:"Updated Status \u2192 "+this.props.updatedStatus,marginBottom:"12px",color:"primary"})),i.a.createElement("br",null),i.a.createElement(ue.a,{id:"alert-dialog-description"},i.a.createElement(te,{passMakeEmpty:this.makeEmpty,updateDescription:this.setDescription}),i.a.createElement(S.a,{onClick:function(){return e.handleSubmit()},color:"primary",disabled:this.state.buttonDisabled,style:{fontSize:"15px",fontWeight:"bold"}},"Submit"))),i.a.createElement(U.a,null,i.a.createElement(S.a,{onClick:function(){return e.justClose()},color:this.props.color,autoFocus:!0},this.props.buttonText))))}}]),a}(i.a.Component),pe=Object(z.a)({root:{maxWidth:700,margin:"0 auto"},media:{height:140},mediaMap:{height:200},headerTextColor:{color:"white"}});function de(e){var t=i.a.useState(!1),a=Object(D.a)(t,2),n=a[0],r=a[1],o=i.a.useState(e.data.status),l=Object(D.a)(o,2),c=l[0],s=l[1],u=i.a.useState(e.data.severity),m=Object(D.a)(u,2),p=m[0],d=m[1],h=pe(),g="https://maps.googleapis.com/maps/api/staticmap?size=512x512&format=png&style=feature:road.highway%7Celement:geometry%7Cvisibility:simplified%7Ccolor:0xc280e9&style=feature:transit.line%7Cvisibility:simplified%7Ccolor:0xbababa&style=feature:road.highway%7Celement:labels.text.stroke%7Cvisibility:on%7Ccolor:0xb06eba&style=feature:road.highway%7Celement:labels.text.fill%7Cvisibility:on%7Ccolor:0xffffff&visible="+e.data.latitude+","+e.data.longitude+"&markers=color:red%7Clabel:A%7C"+e.data.latitude+","+e.data.longitude+"&key=AIzaSyDZBgT-uZYXzTSkTJbiDcYT4D_XYsS8aUQ&zoom=15";return i.a.createElement(W.a,{style:{border:"2px solid rgba(255,255,255,0.1)"},className:h.root},i.a.createElement(P.a,{className:h.media,image:e.data.imageURL}),i.a.createElement(F.a,null,i.a.createElement(_.a,{variant:"body2",color:"textSecondary",component:"p"},i.a.createElement($,{text:"Reported By",marginBottom:"12px",color:h.headerTextColor.color}),i.a.createElement(_.a,{gutterBottom:!0},i.a.createElement("div",null,i.a.createElement(E.a,{alt:e.data.profileName,src:e.data.profileURL,style:{display:"inline-block",verticalAlign:"middle"}}),i.a.createElement("div",{style:{display:"inline-block",position:"relative",top:"3px"}},"\xa0 \xa0 ",e.data.profileName))),i.a.createElement("br",null),i.a.createElement(_.a,{gutterBottom:!0},i.a.createElement(q.a,null),"\xa0 \xa0 ",e.data.dateTime.split(",")[0]),i.a.createElement("br",null),i.a.createElement(_.a,{gutterBottom:!0},i.a.createElement(V.a,null),"\xa0 \xa0 ",e.data.location),i.a.createElement("br",null),i.a.createElement($,{text:"Severity Rate",editIcon:!0,marginBottom:"40px",color:h.headerTextColor.color}),i.a.createElement(K,{updateSeverityValue:d,value:e.data.severity}),i.a.createElement("br",null),i.a.createElement($,{text:"Report Status",editIcon:!0,marginBottom:"30px",color:h.headerTextColor.color}),i.a.createElement(se,{value:e.data.status,updateSelectedValue:s}),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("div",null,i.a.createElement(S.a,{onClick:function(){r(!0)},color:"primary",style:{fontSize:"15px",fontWeight:"bold"}},"Make Updates"),i.a.createElement(me,{dialogOpenState:n,updateCloseDialogState:r,title:"Are you sure you want to update?",content:"Please provide feedback supporting your updates",buttonText:"Close",color:"primary",updatedStatus:c,updatedSeverity:p,caseId:e.data.caseNumber,mailToProfileName:e.data.profileName,mailToProfileEmail:e.data.profileEmail})),i.a.createElement("p",{style:{marginTop:"20px",textAlign:"justify"}},i.a.createElement("hr",{style:{backgroundColor:"rgba(255, 255, 255, 0.1)"}}),i.a.createElement($,{text:"Complaint Description",marginBottom:"15px",color:h.headerTextColor.color}),e.data.description),i.a.createElement("br",null),i.a.createElement(P.a,{className:h.mediaMap,image:g}),i.a.createElement("br",null),i.a.createElement("hr",{style:{backgroundColor:"rgba(255, 255, 255, 0.1)"}}),i.a.createElement($,{text:"Comments",marginBottom:"15px",color:h.headerTextColor.color}),i.a.createElement(re,{caseNumber:e.data.caseNumber,profileURL:e.data.profileURL}))))}function he(e){var t=i.a.useState(!0),a=Object(D.a)(t,2),n=a[0],r=a[1],o=Object(N.a)(),l=Object(M.a)(o.breakpoints.down("xl")),c=function(){r(!1)},s=i.a.useRef(null);return i.a.useEffect((function(){if(n){var e=s.current;null!==e&&e.focus()}}),[n]),i.a.createElement("div",null,i.a.createElement(A.a,{open:n,onClose:c,scroll:"paper","aria-labelledby":"scroll-dialog-title","aria-describedby":"scroll-dialog-description",fullScreen:l},i.a.createElement(L.a,{id:"scroll-dialog-title",style:{textAlign:"center"}},"Report # ",e.caseNumber),i.a.createElement(B.a,{dividers:!0},i.a.createElement(de,{data:e})),i.a.createElement(U.a,null,i.a.createElement(S.a,{onClick:c,color:"primary"},"Close"))))}var ge,fe,Ee=a(522),ye=a.n(Ee),be=Object(z.a)((function(e){return{root:{flexGrow:1},paper:{padding:"20px",textAlign:"center",color:e.palette.text.secondary}}})),ve=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).updateDataCounter=function(){b.a.post(I,{data:{authorityId:n.props.authorityId}}).then((function(e){ge.setState({dataCounter:e.data.length})}))},n.goToReport=function(e){n.setState({detailedDataModal:""},(function(){n.setState({detailedDataModal:i.a.createElement(he,{imageURL:e.imageURL,dateTime:n.formatDate(e.created_date),location:e.location,description:e.description,severity:e.severity,caseNumber:e.case_id,latitude:e.latitude,longitude:e.longitude,profileURL:e.user_photo_url,profileName:n.capitalize(e.user_full_name),status:n.capitalize(e.status),profileEmail:e.user_email})})}))},n.formatDate=function(e){return new Date(Date.parse(e)).toLocaleString()},n.capitalize=function(e){for(var t=0,a=(e=e.split(" ")).length;t<a;t++)e[t]=e[t][0].toUpperCase()+e[t].substr(1);return e.join(" ")},n.state={mapView:"",detailedDataModal:"",authorityAddress:"",authorityName:"",dataCounter:0},ge=Object(d.a)(n),n.updateDataCounter(),b.a.post("https://spothole.ml:5000/api/profile/authority/data",{data:{authorityId:n.props.authorityId}}).then((function(e){ge.setState({authorityAddress:e.data[0].address,authorityName:e.data[0].name,mapView:i.a.createElement("div",null,i.a.createElement(T,{authorityId:n.props.authorityId,centerLat:e.data[0].latitude,centerLng:e.data[0].longitude,goToReport:n.goToReport,heatMapData:[]}))})})).catch((function(e){console.info("Cannot read authority profile data")})),n}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props.classes;return i.a.createElement("div",{style:{marginTop:"100px"}},i.a.createElement(h.a,null,i.a.createElement(_.a,{gutterBottom:!0,style:{textAlign:"center",fontSize:"2.7em"}},"Track and Update\xa0",i.a.createElement(ye.a,{style:{fontSize:50},color:"primary"})," ","Reports with Ease"),i.a.createElement("div",null,i.a.createElement("center",null,i.a.createElement(_.a,{variant:"body2",color:"textSecondary",component:"p",style:{textAlign:"center",fontSize:"1.5em",maxWidth:"600px"}},"View potholes reported in your region differentiated using the given legend. Click on any pothole marker to view it's details or update it with the press of a single button.")))),0===this.state.dataCounter&&i.a.createElement("div",{style:{textAlign:"center",fontWeight:"bold",fontSize:"24px",marginTop:"150px",color:"#333"}}," ","No Reports in your Zone yet. ",i.a.createElement("br",null)," You can keep Monitoring this page for ",i.a.createElement("br",null)," New Reports and to Manage them through a Map View."),0!==this.state.dataCounter&&i.a.createElement("div",null,i.a.createElement(h.a,null,i.a.createElement(g.a,{style:{marginTop:"50px"},container:!0,spacing:3},i.a.createElement(g.a,{item:!0,sm:6,xs:12},i.a.createElement(f.a,{style:{padding:"20px",height:"200px"}},i.a.createElement("h3",null,"Authority Details"),i.a.createElement("br",null),i.a.createElement("h6",{style:{color:"grey"}},"Name"),i.a.createElement("h6",null,this.state.authorityName),i.a.createElement("h6",{style:{color:"grey"}},"Address"),i.a.createElement("h6",null,this.state.authorityAddress))),i.a.createElement(g.a,{item:!0,sm:6,xs:12},i.a.createElement(f.a,{style:{padding:"20px",height:"200px"}},i.a.createElement("h3",null,"Map Legend [Severity]"),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("div",{style:{display:"flex",justifyContent:"start"}},i.a.createElement("div",null,i.a.createElement("center",null,i.a.createElement(E.a,{variant:"rounded",alt:"High",src:"https://i.ibb.co/kMZV43H/output-onlinepngtools.png",className:e.large}),i.a.createElement("h5",null,"High"))),i.a.createElement("div",{style:{marginLeft:"40px",marginRight:"40px"}},i.a.createElement("center",null,i.a.createElement(E.a,{variant:"rounded",alt:"Medium",src:"https://i.ibb.co/RC2LmDh/output-onlinepngtools-1.png",className:e.large}),i.a.createElement("h5",null,"Medium"))),i.a.createElement("div",null,i.a.createElement("center",null,i.a.createElement(E.a,{variant:"rounded",alt:"Low",src:"https://i.ibb.co/2dzSbjJ/output-onlinepngtools-2.png",className:e.large}),i.a.createElement("h5",null,"Low")))))))),i.a.createElement("br",null),i.a.createElement(h.a,null,i.a.createElement("div",{style:{border:"2px SOLID #2997F7",borderRadius:"5px"}},this.state.mapView)),this.state.detailedDataModal))}}]),a}(i.a.Component),Se=Object(Z.a)(be)(ve),xe=a(322),ke=a(946),Ce=a(945),we=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={pendingCount:0,cancelledCount:0,approvedCount:0,completedCount:0,inProgressCount:0,address:""},b.a.post(I,{data:{authorityId:n.props.authorityId}}).then((function(e){var t=e.data.filter((function(e){return"completed"===e.status})).length,a=e.data.filter((function(e){return"cancelled"===e.status})).length,r=e.data.filter((function(e){return"working"===e.status})).length,o=e.data.filter((function(e){return"submitted"===e.status})).length,i=e.data.filter((function(e){return"approved"===e.status})).length+r+t;n.setState({cancelledCount:a,approvedCount:i,completedCount:t,inProgressCount:r,pendingCount:o})})),b.a.post("https://spothole.ml:5000/api/profile/authority/data",{data:{authorityId:n.props.authorityId}}).then((function(e){n.setState({address:e.data[0].address})})),n}return Object(u.a)(a,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("center",null,i.a.createElement(W.a,{style:{marginTop:"125px",borderRadius:12,minWidth:256,maxWidth:500,textAlign:"center",marginLeft:"50px",marginRight:"50px"}},i.a.createElement(F.a,null,i.a.createElement(E.a,{style:{width:120,height:120,margin:"auto",marginTop:"15px",marginBottom:"15px"},src:this.props.photoURL}),i.a.createElement("h3",{style:{fontSize:18,fontWeight:"bold",letterSpacing:"0.5px",marginTop:8,marginBottom:0}},this.props.name),i.a.createElement("span",null,i.a.createElement(Ce.a,{style:{fontSize:14,marginBottom:"1em",fontWeight:"bold"},href:"mailto:"+this.props.email},this.props.email)),i.a.createElement("span",{style:{fontSize:14,color:"white",marginTop:"1em",fontWeight:"bold",letterSpacing:"0.5px"}},i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement(V.a,null),"\xa0 ",this.state.address)),i.a.createElement(ke.a,{variant:"middle"}),i.a.createElement("br",null),i.a.createElement($,{text:"Status Statistics"}),i.a.createElement(xe.a,{style:{display:"flex",justifyContent:"center",marginRight:"100px",marginLeft:"100px"}},i.a.createElement(xe.a,{p:2,flex:"auto"},i.a.createElement("p",{style:{fontSize:12,color:"#9e9e9e",fontWeight:500,fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',margin:0}},"Pending"),i.a.createElement("p",{style:{fontSize:20,fontWeight:"bold",marginBottom:4,letterSpacing:"1px"}},this.state.pendingCount)),i.a.createElement(xe.a,{p:2,flex:"auto"},i.a.createElement("p",{style:{fontSize:12,color:"#9e9e9e",fontWeight:500,fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',margin:0}},"Approved"),i.a.createElement("p",{style:{fontSize:20,fontWeight:"bold",marginBottom:4,letterSpacing:"1px"}},this.state.approvedCount))),i.a.createElement(xe.a,{display:"flex"},i.a.createElement(xe.a,{p:2,flex:"auto"},i.a.createElement("p",{style:{fontSize:12,color:"#9e9e9e",fontWeight:500,fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',margin:0}},"In Progress"),i.a.createElement("p",{style:{fontSize:20,fontWeight:"bold",marginBottom:4,letterSpacing:"1px"}},this.state.inProgressCount)),i.a.createElement(xe.a,{p:2,flex:"auto"},i.a.createElement("p",{style:{fontSize:12,color:"#9e9e9e",fontWeight:500,fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',margin:0}},"Completed"),i.a.createElement("p",{style:{fontSize:20,fontWeight:"bold",marginBottom:4,letterSpacing:"1px"}},this.state.completedCount)),i.a.createElement(xe.a,{p:2,flex:"auto"},i.a.createElement("p",{style:{fontSize:12,color:"#9e9e9e",fontWeight:500,fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',margin:0}},"Cancelled"),i.a.createElement("p",{style:{fontSize:20,fontWeight:"bold",marginBottom:4,letterSpacing:"1px"}},this.state.cancelledCount))),i.a.createElement("div",{style:{marginLeft:"20px",marginRight:"20px",marginTop:"20px"}}))))}}]),a}(i.a.Component),je=a(263),Ie=a.n(je),Oe=a(46),Re=Object(z.a)({root:{minWidth:275,maxWidth:400},title:{fontSize:14},pos:{marginBottom:12}}),Te=["#4285F4","#34A853","#FBBC05","#990099","#EA4335"],De=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).makeData=function(e){var t={};return e.forEach((function(e){void 0===t[e.status]?t[e.status]=1:t[e.status]+=1})),[{name:"Submitted",value:t.submitted||0},{name:"Approved",value:t.approved||0},{name:"Working",value:t.working||0},{name:"Completed",value:t.completed||0},{name:"Cancelled",value:t.cancelled||0}]},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props.classes,t=this.makeData(this.props.data);return i.a.createElement(W.a,{className:e.root},i.a.createElement(F.a,null,i.a.createElement(_.a,{className:e.title,color:"textSecondary",gutterBottom:!0},"Statistics"),i.a.createElement(_.a,{variant:"h5",component:"h2"},"Current Report Status"),i.a.createElement(_.a,{variant:"body2",component:"p"},i.a.createElement(Oe.f,{width:400,height:400},i.a.createElement(Oe.e,{dataKey:"value",isAnimationActive:!0,data:t,cx:200,cy:200,outerRadius:80,label:!0,innerRadius:60,paddingAngle:5},t.map((function(e,t){return i.a.createElement(Oe.c,{stroke:Te[t%Te.length],fill:Te[t%Te.length]})}))),i.a.createElement(Oe.g,null),i.a.createElement(Oe.d,null)),i.a.createElement("br",null),'"region and severity wise status summary"')))}}]),a}(o.PureComponent),Ae=Object(Z.a)(Re)(De),Ue=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).makeData=function(e){for(var t={},a=1;a<=10;a++)t[a]={name:"Sev "+a,submitted:0,approved:0,working:0,completed:0,cancelled:0};return e.forEach((function(e){t[e.severity][e.status]+=1})),Object.values(t)},e}return Object(u.a)(a,[{key:"render",value:function(){var e=window.innerWidth<500?window.innerWidth-75:window.innerWidth/3,t=this.makeData(this.props.data);return i.a.createElement("div",null,i.a.createElement(Oe.b,{width:e,height:542,data:t,margin:{top:20,right:30,left:20,bottom:5}},i.a.createElement(Oe.h,{dataKey:"name"}),i.a.createElement(Oe.i,null),i.a.createElement(Oe.g,null),i.a.createElement(Oe.d,null),i.a.createElement(Oe.a,{dataKey:"submitted",stackId:"a",fill:"#4285F4"}),i.a.createElement(Oe.a,{dataKey:"approved",stackId:"a",fill:"#34A853"}),i.a.createElement(Oe.a,{dataKey:"working",stackId:"a",fill:"#FBBC05"}),i.a.createElement(Oe.a,{dataKey:"completed",stackId:"a",fill:"#990099"}),i.a.createElement(Oe.a,{dataKey:"cancelled",stackId:"a",fill:"#EA4335"})))}}]),a}(o.PureComponent),Be=a(248),Le=a(933),Me=Object(z.a)((function(e){return{root:{flexGrow:1},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary}}})),Ne=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).formatDate=function(e){return new Date(Date.parse(e)).toLocaleString()},n.capitalize=function(e){for(var t=0,a=(e=e.split(" ")).length;t<a;t++)e[t]=e[t][0].toUpperCase()+e[t].substr(1);return e.join(" ")},n.state={reportsDataTable:"",dataModal:"",pieChart:"",barChart:""},fe=Object(d.a)(n),b.a.post(I,{data:{authorityId:n.props.authorityId}}).then((function(e){if(e.data.length>0){var t=e.data,a=t.map((function(e){var t={};return t["Case Id"]=e.case_id,t.Location=n.capitalize(e.location),t.Severity=e.severity,t.Status=n.capitalize(e.status),t["Report Date"]=n.formatDate(e.created_date).split(",")[0],t["Reporter Name"]=n.capitalize(e.user_full_name),t})),r=Object.keys(a[0]),o={filterType:"checkbox",selectableRows:"none",onRowClick:function(e,a){var r=t[a.dataIndex];fe.setState({dataModal:""},(function(){fe.setState({dataModal:i.a.createElement(he,{imageURL:r.imageURL,dateTime:n.formatDate(r.created_date),location:r.location,description:r.description,severity:r.severity,caseNumber:r.case_id,latitude:r.latitude,longitude:r.longitude,profileURL:r.user_photo_url,profileName:n.capitalize(r.user_full_name),status:n.capitalize(r.status),profileEmail:r.user_email})})}))}};fe.setState({reportsDataTable:i.a.createElement(Le.a,{theme:Object(Be.a)({palette:{type:"dark"},overrides:{MuiTableRow:{root:{cursor:"pointer"}}}})},i.a.createElement(Ie.a,{title:"Zone Reports",data:a,columns:r,options:o,style:{cursor:"pointer"}})),pieChart:i.a.createElement(Ae,{data:t}),barChart:i.a.createElement(Ue,{data:t})})}})),n}return Object(u.a)(a,[{key:"render",value:function(){return i.a.createElement("div",null,""===this.state.pieChart&&i.a.createElement("div",{style:{textAlign:"center",fontWeight:"bold",fontSize:"24px",marginTop:"150px",color:"#333"}}," ","No Reports in your Zone yet. ",i.a.createElement("br",null)," You can keep monitoring this page ",i.a.createElement("br",null)," for New Reports"),""!==this.state.pieChart&&i.a.createElement("div",null,i.a.createElement(h.a,null,i.a.createElement(g.a,{style:{marginTop:"100px"},container:!0,spacing:3},i.a.createElement(g.a,{item:!0,sm:5},i.a.createElement(f.a,null,this.state.pieChart)),i.a.createElement(g.a,{item:!0,sm:7},i.a.createElement(f.a,null,this.state.barChart)))),i.a.createElement(h.a,{style:{marginTop:"50px"}},this.state.reportsDataTable,this.state.dataModal)))}}]),a}(i.a.Component),ze=Object(Z.a)(Me)(Ne),We=a(535),Fe=a.n(We),Pe=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleClose=function(){e.props.updateUserStatus()},e.justClose=function(){e.props.updateCloseDialogState()},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this;return i.a.createElement("div",null,i.a.createElement(A.a,{open:this.props.dialogOpenState,onClose:function(){return e.justClose()},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},i.a.createElement(L.a,{id:"alert-dialog-title"},this.props.title),i.a.createElement(B.a,null,i.a.createElement(ue.a,{id:"alert-dialog-description"},this.props.content)),i.a.createElement(U.a,null,i.a.createElement(S.a,{onClick:function(){return e.handleClose()},color:this.props.color,autoFocus:!0},this.props.buttonText),void 0!==this.props.linkTo&&i.a.createElement(S.a,{onClick:function(){return e.justClose()},color:"primary",autoFocus:!0},"No"))))}}]),a}(i.a.Component),_e=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(e){var n;Object(s.a)(this,a),(n=t.call(this,e)).capitalize=function(e){for(var t=0,a=(e=e.split(" ")).length;t<a;t++)e[t]=e[t][0].toUpperCase()+e[t].substr(1);return e.join(" ")},n.updateDialogState=function(){n.setState({dialogOpenState:!1})},n.updateUserStatus=function(){b.a.post("https://spothole.ml:5000/api/authority/update/user/status",{data:{userId:n.state.clickedRow[0],status:"Allowed"===n.state.clickedRow[3]?"blocked":"allowed"}}).then((function(e){var t="Hi "+n.state.clickedRow[1]+",\n\nWe have decided to turn your status back to allowed. You can now try signing into your account now. \n\nIf you have additional questions, feel free to send an email to support.spothole@gmail.com. Thank you for being a part of the Spothole community.",a="Hi "+n.state.clickedRow[1]+",\n\nThere seems to be some unusual activity from your account. Your status has to be turned to blocked. \n\nIf you have additional questions, feel free to send an email to support.spothole@gmail.com. Thank you for joining the Spothole community.";b.a.post(O,{data:{emailId:n.state.clickedRow[2],subject:"New Notification from Spothole (Your Account Status)",message:"Allowed"===n.state.clickedRow[3]?a:t}}).then((function(e){console.info(e.data),window.location.reload()}))})).catch((function(e){console.info("Cannot update status currently!")}))},n.state={usersDataTable:"",dialogOpenState:!1,clickedRow:"",dataCounter:0};var r=Object(d.a)(n);return b.a.post(I,{data:{authorityId:n.props.authorityId}}).then((function(e){if(e.data.length>0){var t=e.data,a={},o=t.forEach((function(e){void 0===a[e.userId]&&(a[e.userId]={"User Id":e.userId,Name:n.capitalize(e.user_full_name),Email:e.user_email,"User Status":n.capitalize(e.user_status)})}));o=Object.values(a);var l=[];Object.keys(o[0]).forEach((function(e){var t={name:e,options:{display:"User Id"!==e}};l.push(t)}));var c={filterType:"checkbox",onRowClick:function(e,t){n.setState({dialogOpenState:!0,clickedRow:e})},selectableRows:"none"};r.setState({dataCounter:l.length},(function(){r.setState({usersDataTable:i.a.createElement(Le.a,{theme:Object(Be.a)({palette:{type:"dark"},overrides:{MuiTableRow:{root:{cursor:"pointer"}}}})},i.a.createElement(Ie.a,{title:"Users Active in Zone",data:o,columns:l,options:c}))})}))}})),n}return Object(u.a)(a,[{key:"render",value:function(){return i.a.createElement("div",{style:{marginTop:"100px"}},i.a.createElement(h.a,null,i.a.createElement(_.a,{gutterBottom:!0,style:{textAlign:"center",fontSize:"2.7em"}},"Manage and Change\xa0",i.a.createElement(Fe.a,{style:{fontSize:50},color:"primary"})," User Level Permissions"),i.a.createElement("div",null,i.a.createElement("center",null,i.a.createElement(_.a,{variant:"body2",color:"textSecondary",component:"p",style:{textAlign:"center",fontSize:"1.5em",maxWidth:"500"}},"View active users in your region and manage their permissions easily.")))),0===this.state.dataCounter&&i.a.createElement("div",{style:{textAlign:"center",fontWeight:"bold",fontSize:"24px",marginTop:"150px",color:"#333"}}," ","No Active Users in your Zone yet. ",i.a.createElement("br",null)," You can keep monitoring this page ",i.a.createElement("br",null)," for seeing New User Activity."),0!==this.state.dataCounter&&i.a.createElement(h.a,{style:{marginTop:"50px"}},this.state.usersDataTable,i.a.createElement(Pe,{dialogOpenState:this.state.dialogOpenState,updateCloseDialogState:this.updateDialogState,title:"Change User Status to "+("Allowed"===this.state.clickedRow[3]?"Blocked":"Allowed"),content:"Are you sure you want to change the status?",buttonText:"Yes, Change Status",linkTo:"/users",updateUserStatus:this.updateUserStatus,color:"secondary"})))}}]),a}(i.a.Component),He=a(196),qe=a(536),Ye=a(3),Ve=a(67),Ze=a(948),Ge=a(947),Je=a(480),Ke=a(918),Xe=a(341),Qe=a(537),$e=a.n(Qe),et=a(542),tt=a.n(et),at=a(543),nt=a.n(at),rt=a(922),ot=a(546),it=a.n(ot),lt=a(545),ct=a.n(lt),st=a(548),ut=a.n(st),mt=a(549),pt=a.n(mt),dt=a(547),ht=a.n(dt),gt=a(949),ft=a(483),Et=a(103),yt=a(538),bt=a.n(yt),vt=a(539),St=a.n(vt),xt=a(540),kt=a.n(xt),Ct=a(541),wt=a.n(Ct),jt=Object(z.a)((function(e){return{root:{display:"flex"},appBar:{transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{width:"calc(100% - ".concat(240,"px)"),marginLeft:240,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:e.spacing(2)},hide:{display:"none"},drawer:{width:240,flexShrink:0},drawerPaper:{width:240},drawerHeader:Object(qe.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar,{justifyContent:"flex-end"}),content:{flexGrow:1,padding:e.spacing(3),transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginLeft:-240},contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginLeft:0},inputRoot:{color:"inherit"},inputInput:Object(He.a)({padding:e.spacing(1,1,1,7),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:120,"&:focus":{width:200}})}}));function It(){var e=jt(),t=Object(N.a)(),a=i.a.useState(!1),n=Object(D.a)(a,2),r=n[0],o=n[1],l=i.a.useState("block"),c=Object(D.a)(l,2),s=c[0],u=c[1],m=function(){window.innerWidth<500&&u("block"),o(!1)};return i.a.createElement("div",{className:e.root},i.a.createElement(Ze.a,null),i.a.createElement(Ge.a,{position:"fixed",className:Object(Ye.a)(e.appBar,Object(He.a)({},e.appBarShift,r))},i.a.createElement(Je.a,null,i.a.createElement(Xe.a,{color:"inherit","aria-label":"open drawer",onClick:function(){window.innerWidth<500&&u("none"),o(!0)},edge:"start",className:Object(Ye.a)(e.menuButton,r&&e.hide)},i.a.createElement($e.a,null)),i.a.createElement(_.a,{style:{display:s},variant:"h5",noWrap:!0},"Spothole Authority"),i.a.createElement("div",{style:{marginLeft:"auto"}},i.a.createElement(Xe.a,{"aria-label":"About Me",color:"inherit"},i.a.createElement("a",{href:"https://nirbhay.me",target:"_blank",rel:"noopener noreferrer"},i.a.createElement(bt.a,null))),i.a.createElement(Xe.a,{"aria-label":"GitHub",color:"inherit"},i.a.createElement("a",{href:"https://github.com/nirbhayph",target:"_blank",rel:"noopener noreferrer"},i.a.createElement(St.a,null))),i.a.createElement(Xe.a,{"aria-label":"LinkedIn",color:"inherit"},i.a.createElement("a",{href:"https://linkedin.com/in/nirbhaypherwani",target:"_blank",rel:"noopener noreferrer"},i.a.createElement(kt.a,null))),i.a.createElement(Xe.a,{"aria-label":"Acknowledgements",color:"inherit"},i.a.createElement("a",{href:"https://github.com/nirbhayph/spothole.authority",target:"_blank",rel:"noopener noreferrer"},i.a.createElement(wt.a,null)))))),i.a.createElement(Ve.a,{className:e.drawer,variant:"persistent",anchor:"left",open:r,classes:{paper:e.drawerPaper}},i.a.createElement("div",{className:e.drawerHeader},i.a.createElement(Xe.a,{onClick:m},"ltr"===t.direction?i.a.createElement(tt.a,null):i.a.createElement(nt.a,null))),i.a.createElement(ke.a,null),i.a.createElement(Ke.a,null,i.a.createElement(Et.b,{to:"/mapview"},i.a.createElement(rt.a,{onClick:m,button:!0,key:"Report"},i.a.createElement(gt.a,null,i.a.createElement(ct.a,{color:"primary"})),i.a.createElement(ft.a,{primary:"Map Region View"}))),i.a.createElement(Et.b,{to:"/"},i.a.createElement(rt.a,{onClick:m,button:!0,key:"Dashboard"},i.a.createElement(gt.a,null,i.a.createElement(it.a,{color:"primary"})),i.a.createElement(ft.a,{primary:"Dashboard"}))),i.a.createElement(Et.b,{to:"/users"},i.a.createElement(rt.a,{onClick:m,button:!0,key:"Manage Users"},i.a.createElement(gt.a,null,i.a.createElement(ht.a,{color:"primary"})),i.a.createElement(ft.a,{primary:"Manage Users"}))),i.a.createElement(Et.b,{to:"/profile"},i.a.createElement(rt.a,{onClick:m,button:!0,key:"Profile"},i.a.createElement(gt.a,null,i.a.createElement(ut.a,{color:"primary"})),i.a.createElement(ft.a,{primary:"Profile"})))),i.a.createElement(Et.b,{to:"/logout"},i.a.createElement(rt.a,{onClick:m,button:!0,key:"Logout"},i.a.createElement(gt.a,null,i.a.createElement(pt.a,{color:"primary"})),i.a.createElement(ft.a,{primary:"Logout"})))))}var Ot=function(){return i.a.createElement("div",{style:{marginTop:"50px"}})},Rt=a(550),Tt=a.n(Rt),Dt=Object(z.a)((function(e){return{root:{height:"100vh"},image:{backgroundImage:"url(https://source.unsplash.com/random?road)",backgroundRepeat:"no-repeat",backgroundColor:"light"===e.palette.type?e.palette.grey[50]:e.palette.grey[900],backgroundSize:"cover",backgroundPosition:"center"},paper:{margin:e.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),marginTop:"50px",backgroundColor:e.palette.primary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{marginTop:"50px",maxWidth:"250px",paddingTop:"15px",paddingBottom:"15px"}}}));function At(e){var t=Dt();return i.a.createElement(g.a,{container:!0,component:"main",className:t.root},i.a.createElement(Ze.a,null),i.a.createElement(g.a,{item:!0,xs:!1,sm:4,md:7,className:t.image}),i.a.createElement(g.a,{item:!0,xs:12,sm:8,md:5,component:f.a,elevation:6,square:!0,style:{backgroundImage:"url('https://images.unsplash.com/photo-1543839482-a95d35fc5a77?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=900&q=80'), linear-gradient(rgba(0,0,0,0.6),rgba(0,0,0,0.6))",backgroundBlendMode:"overlay",borderLeft:"5px SOLID #212121"}},i.a.createElement("div",{className:t.paper},i.a.createElement(_.a,{component:"h1",variant:"h1",style:{marginTop:"100px"}},i.a.createElement("b",null,i.a.createElement(V.a,{fontSize:"inherit"}))),i.a.createElement("br",null),i.a.createElement(_.a,{component:"h1",variant:"h3"},i.a.createElement("b",null,"Spothole")),i.a.createElement("br",null),i.a.createElement(_.a,{component:"h1",variant:"h5",style:{marginTop:"100px"}},i.a.createElement("b",null,"Sign In")),i.a.createElement(S.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,onClick:function(){return document.getElementsByClassName("abcRioButton")[0].click()}},i.a.createElement("b",null,"Sign In With Google \xa0",i.a.createElement(Tt.a,null))))))}var Ut=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).callRender=function(e){window.gapi.load("signin2",(function(){var t={width:0,height:0,client_id:w,onsuccess:e,longTitle:!1,theme:"dark"};gapi.signin2.render("loginButton",t)}))},n.logout=function(e){n.state.isSignedIn?window.gapi.auth2.getAuthInstance().signOut().then((function(){n.setState({isSignedIn:n.auth2.isSignedIn.get()},(function(){localStorage.setItem("authoritySignedIn",!1),n.urlRedirect(e||R)}))})):console.info("Already Signed In")},n.urlRedirect=function(e){var t=setTimeout((function(){return window.location.replace(e),!0}),300);return(window.location=e)||(window.location.href=e)?(clearTimeout(t),!0):(clearTimeout(t),window.location.replace(e),!0)},n.validateAndPostProfileData=function(e){b.a.post("https://spothole.ml:5000/api/authority/check",{data:{emailId:e.getEmail()}}).then((function(t){"Authorized Login"===t.data?b.a.post("https://spothole.ml:5000/api/profile/authority/update",{data:{authorityId:e.getId(),emailId:e.getEmail(),name:e.getName(),photoURL:e.getImageUrl()}}):(n.logout("https://nirbhay.me/spothole.authority/UALogin"),console.info("Unauthorized Login"))})).catch((function(e){n.logout(),console.info("Cannot login at this time!")}))},n.navigationBar=function(){return i.a.createElement("div",null," ",i.a.createElement(It,null),i.a.createElement(Ot,null)," ")},n.state={isSignedIn:!1,authorityId:"",profileName:"",profileEmail:"",profilePhotoURL:""},n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.onSuccess.bind(this);window.gapi.load("auth2",(function(){e.auth2=gapi.auth2.init({client_id:w}),e.auth2.then((function(){var t=window.gapi.auth2.getAuthInstance().currentUser.get().getBasicProfile();e.setState({isSignedIn:e.auth2.isSignedIn.get(),authorityId:t.getId()||"",profileName:t.getName()||"",profileEmail:t.getEmail()||"",profilePhotoURL:t.getImageUrl()||""})}))})),this.callRender(t)}},{key:"onSuccess",value:function(){var e=this,t=window.gapi.auth2.getAuthInstance().currentUser.get().getBasicProfile();localStorage.setItem("authoritySignedIn",!0),this.setState({isSignedIn:!0,err:null,authorityId:t.getId(),profileName:t.getName(),profileEmail:t.getEmail(),profilePhotoURL:t.getImageUrl()},(function(){e.validateAndPostProfileData(t)}))}},{key:"onLoginFailed",value:function(e){this.setState({isSignedIn:!1,error:e})}},{key:"loginStatus",value:function(){if("true"===localStorage.getItem("authoritySignedIn")&&this.state.isSignedIn)switch(this.props.linkTo){case"/dashboard":return i.a.createElement("div",null,i.a.createElement(ze,{authorityId:this.state.authorityId}),this.navigationBar());case"/mapview":return i.a.createElement("div",null,i.a.createElement(Se,{authorityId:this.state.authorityId}),this.navigationBar());case"/users":return i.a.createElement("div",null,i.a.createElement(_e,{authorityId:this.state.authorityId}),this.navigationBar());case"/logout":this.logout();break;case"/profile":return i.a.createElement("div",null,i.a.createElement(we,{authorityId:this.state.authorityId,name:this.state.profileName,email:this.state.profileEmail,photoURL:this.state.profilePhotoURL}),this.navigationBar());case"/":default:return i.a.createElement("div",null,i.a.createElement(ze,{authorityId:this.state.authorityId}),this.navigationBar())}else{if("false"!==localStorage.getItem("authoritySignedIn")||!this.state.isSignedIn)return"true"!==localStorage.getItem("authoritySignedIn")?i.a.createElement("div",null,i.a.createElement("div",{id:"loginButton",style:{display:"none"}},"Login with Google"),i.a.createElement(At,null)):i.a.createElement("div",null);this.urlRedirect(R)}}},{key:"render",value:function(){return i.a.createElement("div",null,this.loginStatus())}}]),a}(o.Component),Bt=a(100),Lt=(a(910),function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return window.location.href="https://nirbhay.me/spothole.authority/404",i.a.createElement("div",null,"404")}}]),a}(i.a.Component)),Mt=Object(Be.a)({palette:{type:"dark",primary:{main:"#2997f7"},secondary:{main:"#ff0000"}},overrides:{MuiPaper:{root:{backgroundColor:"#333"}},MuiStepper:{root:{padding:"0px"}}}});var Nt=function(){return i.a.createElement(Le.a,{theme:Mt},i.a.createElement(Et.a,null,i.a.createElement("div",null,i.a.createElement(Bt.c,null,i.a.createElement(Bt.a,{path:"/mapview",exact:!0},i.a.createElement(Ut,{linkTo:"/mapview"})),i.a.createElement(Bt.a,{path:"/profile",exact:!0},i.a.createElement(Ut,{linkTo:"/profile"})),i.a.createElement(Bt.a,{path:"/logout",exact:!0},i.a.createElement(Ut,{linkTo:"/logout"})),i.a.createElement(Bt.a,{path:"/users",exact:!0},i.a.createElement(Ut,{linkTo:"/users"})),i.a.createElement(Bt.a,{path:"/dashboard",exact:!0},i.a.createElement(Ut,{linkTo:"/dashboard"})),i.a.createElement(Bt.a,{path:"/",exact:!0},i.a.createElement(Ut,{linkTo:"/dashboard"})),i.a.createElement(Bt.a,{path:"*",exact:!0,component:Lt})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(Nt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[583,1,2]]]);
//# sourceMappingURL=main.3f5d9c96.chunk.js.map